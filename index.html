<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Flashcards for Thais</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+Thai:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans Thai', sans-serif;
            touch-action: none; /* Prevents browser handling of touch events like scrolling */
        }
        .card {
            touch-action: pan-y; /* Allow vertical scroll but not horizontal */
            transition: transform 0.3s ease, opacity 0.3s ease;
            cursor: grab;
            position: absolute;
            width: 100%;
            height: 100%;
            will-change: transform;
        }
        .card.dragging {
            transition: none;
            cursor: grabbing;
        }
        .card-inner {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 1.5rem;
            overflow: hidden; /* Ensures the colored div doesn't bleed out of the rounded corners */
        }
        .card-inner.learn-mode-card:active {
            transform: scale(0.98);
            transition: transform 0.1s ease;
        }
        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-md mx-auto">
        
        <!-- Section Selection Screen -->
        <div id="section-selector" class="w-full bg-white p-6 rounded-3xl shadow-lg">
            <h1 class="text-2xl font-bold text-center text-gray-800 mb-2">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</h1>
            <p class="text-center text-gray-500 mb-6">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>
            <div id="section-grid" class="section-grid">
                <!-- Sections will be populated by JavaScript -->
            </div>
        </div>

        <!-- Flashcard Screen -->
        <div id="flashcard-container" class="hidden w-full">
            <div class="flex justify-between items-center mb-4">
                <button id="back-to-sections" class="text-blue-500 hover:text-blue-700">&larr; ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
                <h2 id="section-title" class="text-xl font-bold text-gray-700"></h2>
            </div>
            
            <div id="deck" class="relative w-full aspect-[3/4] mb-4">
                <!-- Cards will be injected here -->
            </div>

            <div id="test-mode-controls" class="hidden text-center mb-4">
                <button id="reveal-btn" class="w-full px-6 py-4 bg-green-500 text-white font-bold rounded-xl shadow-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 text-lg">
                    ‡πÄ‡∏â‡∏•‡∏¢
                </button>
            </div>

            <div class="flex justify-center items-center space-x-4">
                <button id="learn-mode-btn" class="px-6 py-2 bg-blue-500 text-white font-semibold rounded-full shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75">‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</button>
                <button id="test-mode-btn" class="px-6 py-2 bg-gray-200 text-gray-700 font-semibold rounded-full hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75">‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
            </div>
            
        </div>
    </div>

<script>
    // --- DATA ---
    const sections = {
        "Business 1: The Office": [
            { english: "Meeting", thai: "‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°", phonetic: "‡∏°‡∏µ‡∏ó-‡∏ó‡∏¥‡πà‡∏á" },
            { english: "Email", thai: "‡∏≠‡∏µ‡πÄ‡∏°‡∏•", phonetic: "‡∏≠‡∏µ-‡πÄ‡∏°‡∏•" },
            { english: "Report", thai: "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô", phonetic: "‡∏£‡∏µ-‡∏û‡∏≠‡∏£‡πå‡∏ó" },
            { english: "Deadline", thai: "‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô", phonetic: "‡πÄ‡∏î‡∏î-‡πÑ‡∏•‡∏ô‡πå" },
            { english: "Presentation", thai: "‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠", phonetic: "‡∏û‡∏£‡∏µ-‡πÄ‡∏ã‡∏ô-‡πÄ‡∏ó-‡∏ä‡∏±‡πà‡∏ô" },
            { english: "Project", thai: "‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£", phonetic: "‡πÇ‡∏õ‡∏£-‡πÄ‡∏à‡∏Ñ" },
            { english: "Task", thai: "‡∏á‡∏≤‡∏ô", phonetic: "‡∏ó‡∏≤‡∏™‡∏Ñ" },
            { english: "Team", thai: "‡∏ó‡∏µ‡∏°", phonetic: "‡∏ó‡∏µ‡∏°" },
            { english: "Manager", thai: "‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£", phonetic: "‡πÅ‡∏°-‡πÄ‡∏ô-‡πÄ‡∏à‡∏≠‡∏£‡πå" },
            { english: "Colleague", thai: "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô", phonetic: "‡∏Ñ‡∏≠‡∏•-‡∏•‡∏µ‡∏Å" },
            { english: "Client", thai: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤", phonetic: "‡πÑ‡∏Ñ‡∏•-‡πÄ‡∏≠‡πá‡∏ô‡∏ó" },
            { english: "Salary", thai: "‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô", phonetic: "‡πÅ‡∏ã‡∏•-‡∏•‡∏∞-‡∏£‡∏µ‡πà" },
            { english: "Invoice", thai: "‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ", phonetic: "‡∏≠‡∏¥‡∏ô-‡∏ß‡∏≠‡∏¢‡∏ã‡πå" },
            { english: "Contract", thai: "‡∏™‡∏±‡∏ç‡∏ç‡∏≤", phonetic: "‡∏Ñ‡∏≠‡∏ô-‡πÅ‡∏ó‡∏£‡∏Ñ" },
            { english: "Budget", thai: "‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì", phonetic: "‡∏ö‡∏±‡∏î-‡πÄ‡∏à‡∏ó" },
            { english: "Office", thai: "‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô", phonetic: "‡∏≠‡∏≠‡∏ü-‡∏ü‡∏¥‡∏®" },
            { english: "Computer", thai: "‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå", phonetic: "‡∏Ñ‡∏≠‡∏°-‡∏û‡∏¥‡πâ‡∏ß-‡πÄ‡∏ï‡∏≠‡∏£‡πå" },
            { english: "Phone", thai: "‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå", phonetic: "‡πÇ‡∏ü‡∏ô" },
            { english: "Schedule", thai: "‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤", phonetic: "‡∏™‡πÄ‡∏Å-‡∏î‡∏π‡∏•" },
            { english: "Goal", thai: "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢", phonetic: "‡πÇ‡∏Å‡∏•" },
        ],
        "Business 2: Money & Finance": [
            { english: "Profit", thai: "‡∏Å‡∏≥‡πÑ‡∏£", phonetic: "‡∏û‡∏£‡∏≠-‡∏ü‡∏¥‡∏ó" },
            { english: "Loss", thai: "‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô", phonetic: "‡∏•‡∏≠‡∏™" },
            { english: "Revenue", thai: "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ", phonetic: "‡πÄ‡∏£‡∏ü-‡πÄ‡∏ß‡∏ô-‡∏ô‡∏¥‡∏ß" },
            { english: "Expense", thai: "‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢", phonetic: "‡πÄ‡∏≠‡πá‡∏Å‡∏ã‡πå-‡πÄ‡∏û‡∏ô‡∏ã‡πå" },
            { english: "Investment", thai: "‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô", phonetic: "‡∏≠‡∏¥‡∏ô-‡πÄ‡∏ß‡∏™‡∏ó-‡πÄ‡∏°‡∏ô‡∏ó‡πå" },
            { english: "Tax", thai: "‡∏†‡∏≤‡∏©‡∏µ", phonetic: "‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡πå" },
            { english: "Bank", thai: "‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£", phonetic: "‡πÅ‡∏ö‡∏á‡∏Ñ‡πå" },
            { english: "Loan", thai: "‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ", phonetic: "‡πÇ‡∏•‡∏ô" },
            { english: "Interest", thai: "‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢", phonetic: "‡∏≠‡∏¥‡∏ô-‡πÄ‡∏ó‡∏≠-‡πÄ‡∏£‡∏™‡∏ó" },
            { english: "Stock", thai: "‡∏´‡∏∏‡πâ‡∏ô", phonetic: "‡∏™‡∏ï‡πá‡∏≠‡∏Å" },
            { english: "Market", thai: "‡∏ï‡∏•‡∏≤‡∏î", phonetic: "‡∏°‡∏≤‡∏£‡πå-‡πÄ‡∏Å‡πá‡∏ï" },
            { english: "Price", thai: "‡∏£‡∏≤‡∏Ñ‡∏≤", phonetic: "‡πÑ‡∏û‡∏£‡∏ã‡πå" },
            { english: "Cost", thai: "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô", phonetic: "‡∏Ñ‡∏≠‡∏™‡∏ó" },
            { english: "Payment", thai: "‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô", phonetic: "‡πÄ‡∏û-‡πÄ‡∏°‡∏ô‡∏ó‡πå" },
            { english: "Receipt", thai: "‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à", phonetic: "‡∏£‡∏µ-‡∏ã‡∏µ‡∏ó" },
            { english: "Discount", thai: "‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î", phonetic: "‡∏î‡∏¥‡∏™-‡πÄ‡∏Ñ‡∏≤‡∏ó‡πå" },
            { english: "Asset", thai: "‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå", phonetic: "‡πÅ‡∏≠‡∏™-‡πÄ‡∏ã‡∏ó" },
            { english: "Liability", thai: "‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô", phonetic: "‡πÑ‡∏•-‡∏≠‡∏∞-‡∏ö‡∏¥‡∏•-‡∏•‡∏¥-‡∏ï‡∏µ‡πâ" },
            { english: "Capital", thai: "‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô", phonetic: "‡πÅ‡∏Ñ-‡∏õ‡∏¥-‡∏ó‡∏≠‡∏•" },
            { english: "Cash", thai: "‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î", phonetic: "‡πÅ‡∏Ñ‡∏ä" },
        ],
        "Business 3: Marketing & Sales": [
            { english: "Customer", thai: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤", phonetic: "‡∏Ñ‡∏±‡∏™-‡∏ï‡∏≠‡∏°-‡πÄ‡∏°‡∏≠‡∏£‡πå" },
            { english: "Product", thai: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", phonetic: "‡πÇ‡∏õ‡∏£-‡∏î‡∏±‡∏Ñ‡∏ó" },
            { english: "Service", thai: "‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£", phonetic: "‡πÄ‡∏ã‡∏≠-‡∏ß‡∏¥‡∏™" },
            { english: "Brand", thai: "‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå", phonetic: "‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå" },
            { english: "Advertising", thai: "‡∏Å‡∏≤‡∏£‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤", phonetic: "‡πÅ‡∏≠‡∏î-‡πÄ‡∏ß‡∏≠‡∏£‡πå-‡πÑ‡∏ó-‡∏ã‡∏¥‡πà‡∏á" },
            { english: "Campaign", thai: "‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç", phonetic: "‡πÅ‡∏Ñ‡∏°-‡πÄ‡∏õ‡∏ç" },
            { english: "Sales", thai: "‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢", phonetic: "‡πÄ‡∏ã‡∏•‡∏™‡πå" },
            { english: "Target", thai: "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢", phonetic: "‡∏ó‡∏≤‡∏£‡πå-‡πÄ‡∏Å‡πá‡∏ï" },
            { english: "Strategy", thai: "‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå", phonetic: "‡∏™‡πÅ‡∏ï‡∏£-‡∏ó‡∏¥‡∏à‡∏µ‡πâ" },
            { english: "Negotiation", thai: "‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏à‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏≠‡∏á", phonetic: "‡∏ô‡∏¥-‡πÇ‡∏Å-‡∏ä‡∏¥-‡πÄ‡∏≠-‡∏ä‡∏±‡πà‡∏ô" },
            { english: "Deal", thai: "‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á", phonetic: "‡∏î‡∏µ‡∏•" },
            { english: "Order", thai: "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠", phonetic: "‡∏≠‡∏≠-‡πÄ‡∏î‡∏≠‡∏£‡πå" },
            { english: "Delivery", thai: "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á", phonetic: "‡∏î‡∏¥-‡∏•‡∏¥-‡πÄ‡∏ß‡∏≠-‡∏£‡∏µ‡πà" },
            { english: "Feedback", thai: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô", phonetic: "‡∏ü‡∏µ‡∏î-‡πÅ‡∏ö‡πá‡∏Ñ" },
            { english: "Competitor", thai: "‡∏Ñ‡∏π‡πà‡πÅ‡∏Ç‡πà‡∏á", phonetic: "‡∏Ñ‡∏≠‡∏°-‡πÄ‡∏û-‡∏ó‡∏¥-‡πÄ‡∏ó‡∏≠‡∏£‡πå" },
            { english: "Promotion", thai: "‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", phonetic: "‡πÇ‡∏õ‡∏£-‡πÇ‡∏°-‡∏ä‡∏±‡πà‡∏ô" },
            { english: "Retail", thai: "‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏µ‡∏Å", phonetic: "‡∏£‡∏µ-‡πÄ‡∏ó‡∏•" },
            { english: "Wholesale", thai: "‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á", phonetic: "‡πÇ‡∏Æ‡∏•-‡πÄ‡∏ã‡∏•" },
            { english: "Commission", thai: "‡∏Ñ‡πà‡∏≤‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤", phonetic: "‡∏Ñ‡∏≠‡∏°-‡∏°‡∏¥‡∏ä-‡∏ä‡∏±‡πà‡∏ô" },
            { english: "Lead", thai: "‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à", phonetic: "‡∏•‡∏µ‡∏î" },
        ],
        "Business 4: Jobs & Roles": [
            { english: "CEO", thai: "‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£", phonetic: "‡∏ã‡∏µ-‡∏≠‡∏µ-‡πÇ‡∏≠" },
            { english: "Employee", thai: "‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô", phonetic: "‡πÄ‡∏≠‡∏°-‡∏û‡∏•‡∏≠‡∏¢-‡∏¢‡∏µ" },
            { english: "Employer", thai: "‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á", phonetic: "‡πÄ‡∏≠‡∏°-‡∏û‡∏•‡∏≠‡∏¢-‡πÄ‡∏¢‡∏≠‡∏£‡πå" },
            { english: "Assistant", thai: "‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢", phonetic: "‡πÅ‡∏≠‡∏™-‡∏ã‡∏¥‡∏™-‡πÅ‡∏ó‡∏ô‡∏ó‡πå" },
            { english: "Accountant", thai: "‡∏ô‡∏±‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ", phonetic: "‡πÅ‡∏≠‡∏Ñ-‡πÄ‡∏Ñ‡∏≤‡∏ô-‡πÄ‡∏ó‡∏ô‡∏ó‡πå" },
            { english: "Engineer", thai: "‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£", phonetic: "‡πÄ‡∏≠‡∏ô-‡∏à‡∏¥-‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå" },
            { english: "Designer", thai: "‡∏ô‡∏±‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö", phonetic: "‡∏î‡∏¥-‡πÑ‡∏ã-‡πÄ‡∏ô‡∏≠‡∏£‡πå" },
            { english: "Developer", thai: "‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤", phonetic: "‡∏î‡∏¥-‡πÄ‡∏ß‡∏•-‡∏•‡∏≠‡∏õ-‡πÄ‡∏õ‡∏≠‡∏£‡πå" },
            { english: "Consultant", thai: "‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤", phonetic: "‡∏Ñ‡∏≠‡∏ô-‡∏ã‡∏±‡∏•-‡πÅ‡∏ó‡∏ô‡∏ó‡πå" },
            { english: "Analyst", thai: "‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå", phonetic: "‡πÅ‡∏≠‡∏ô-‡∏ô‡∏∞-‡∏•‡∏¥‡∏™‡∏ó‡πå" },
            { english: "HR", thai: "‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•", phonetic: "‡πÄ‡∏≠‡∏ä-‡∏≠‡∏≤‡∏£‡πå" },
            { english: "Recruiter", thai: "‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏´‡∏≤‡∏á‡∏≤‡∏ô", phonetic: "‡∏£‡∏µ-‡∏Ñ‡∏£‡∏π‡∏ó-‡πÄ‡∏ï‡∏≠‡∏£‡πå" },
            { english: "Intern", thai: "‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ù‡∏∂‡∏Å‡∏á‡∏≤‡∏ô", phonetic: "‡∏≠‡∏¥‡∏ô-‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô" },
            { english: "Partner", thai: "‡∏´‡∏∏‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô", phonetic: "‡∏û‡∏≤‡∏£‡πå‡∏ó-‡πÄ‡∏ô‡∏≠‡∏£‡πå" },
            { english: "Founder", thai: "‡∏ú‡∏π‡πâ‡∏Å‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á", phonetic: "‡πÄ‡∏ü‡∏≤-‡πÄ‡∏î‡∏≠‡∏£‡πå" },
            { english: "Director", thai: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£", phonetic: "‡πÑ‡∏î-‡πÄ‡∏£‡∏Ñ-‡πÄ‡∏ï‡∏≠‡∏£‡πå" },
            { english: "Executive", thai: "‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£", phonetic: "‡πÄ‡∏≠‡πá‡∏Å-‡πÄ‡∏ã-‡∏Ñ‡∏¥‡∏ß-‡∏ó‡∏µ‡∏ü" },
            { english: "Specialist", thai: "‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç", phonetic: "‡∏™‡πÄ‡∏õ-‡πÄ‡∏ä‡∏µ‡∏¢‡∏•-‡∏•‡∏¥‡∏™‡∏ó‡πå" },
            { english: "Supervisor", thai: "‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô", phonetic: "‡∏ã‡∏π-‡πÄ‡∏õ‡∏≠‡∏£‡πå-‡πÑ‡∏ß-‡πÄ‡∏ã‡∏≠‡∏£‡πå" },
            { english: "Representative", thai: "‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô", phonetic: "‡πÄ‡∏£‡∏û-‡∏û‡∏£‡∏µ-‡πÄ‡∏ã‡∏ô-‡∏ó‡∏∞-‡∏ó‡∏µ‡∏ü" },
        ],
        "Business 5: Company & Growth": [
            { english: "Company", thai: "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó", phonetic: "‡∏Ñ‡∏±‡∏°-‡∏û‡∏∞-‡∏ô‡∏µ" },
            { english: "Business", thai: "‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à", phonetic: "‡∏ö‡∏¥‡∏™-‡πÄ‡∏ô‡∏™" },
            { english: "Startup", thai: "‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡∏≠‡∏±‡∏û", phonetic: "‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó-‡∏≠‡∏±‡∏û" },
            { english: "Corporation", thai: "‡∏ö‡∏£‡∏£‡∏©‡∏±‡∏ó", phonetic: "‡∏Ñ‡∏≠‡∏£‡πå-‡∏û‡∏≠-‡πÄ‡∏£-‡∏ä‡∏±‡πà‡∏ô" },
            { english: "Industry", thai: "‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°", phonetic: "‡∏≠‡∏¥‡∏ô-‡∏î‡∏±‡∏™-‡∏ó‡∏£‡∏µ‡πâ" },
            { english: "Growth", thai: "‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï", phonetic: "‡πÇ‡∏Å‡∏£‡∏ó" },
            { english: "Success", thai: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", phonetic: "‡∏ã‡∏±‡∏Ñ-‡πÄ‡∏ã‡∏™" },
            { english: "Failure", thai: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß", phonetic: "‡πÄ‡∏ü‡∏•-‡πÄ‡∏•‡∏µ‡∏¢‡∏£‡πå" },
            { english: "Risk", thai: "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á", phonetic: "‡∏£‡∏¥‡∏™‡∏Ñ‡πå" },
            { english: "Opportunity", thai: "‡πÇ‡∏≠‡∏Å‡∏≤‡∏™", phonetic: "‡∏≠‡∏≠‡∏û-‡∏û‡∏≠‡∏£‡πå-‡∏ó‡∏π-‡∏ô‡∏¥-‡∏ï‡∏µ‡πâ" },
            { english: "Merger", thai: "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£", phonetic: "‡πÄ‡∏°‡∏≠-‡πÄ‡∏à‡∏≠‡∏£‡πå" },
            { english: "Acquisition", thai: "‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£", phonetic: "‡πÅ‡∏≠‡∏Ñ-‡∏Ñ‡∏ß‡∏¥-‡∏ã‡∏¥-‡∏ä‡∏±‡πà‡∏ô" },
            { english: "Headquarters", thai: "‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏ç‡πà", phonetic: "‡πÄ‡∏Æ‡∏î-‡∏Ñ‡∏ß‡∏≠-‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™" },
            { english: "Branch", thai: "‡∏™‡∏≤‡∏Ç‡∏≤", phonetic: "‡∏ö‡∏£‡∏≤‡∏ô‡∏ä‡πå" },
            { english: "Department", thai: "‡πÅ‡∏ú‡∏ô‡∏Å", phonetic: "‡∏î‡∏¥-‡∏û‡∏≤‡∏£‡πå‡∏ó-‡πÄ‡∏°‡∏ô‡∏ó‡πå" },
            { english: "Policy", thai: "‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢", phonetic: "‡∏û‡∏≠-‡∏•‡∏¥-‡∏ã‡∏µ‡πà" },
            { english: "Procedure", thai: "‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô", phonetic: "‡πÇ‡∏û‡∏£-‡∏ã‡∏µ-‡πÄ‡∏à‡∏≠‡∏£‡πå" },
            { english: "Quality", thai: "‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û", phonetic: "‡∏Ñ‡∏ß‡∏≠-‡∏•‡∏¥-‡∏ï‡∏µ‡πâ" },
            { english: "Quantity", thai: "‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì", phonetic: "‡∏Ñ‡∏ß‡∏≠‡∏ô-‡∏ó‡∏¥-‡∏ï‡∏µ‡πâ" },
            { english: "Data", thai: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", phonetic: "‡πÄ‡∏î-‡∏ï‡πâ‡∏≤" },
        ],
    };

    const colorPalette = [
        'bg-blue-200', 'bg-green-200', 'bg-yellow-200', 'bg-red-200', 'bg-purple-200', 'bg-pink-200', 'bg-indigo-200'
    ];

    // --- STATE ---
    let currentSection = null;
    let currentDeck = [];
    let cardIndex = 0;
    let isLearnMode = true;
    const synth = window.speechSynthesis;

    // --- DOM ELEMENTS ---
    const sectionSelector = document.getElementById('section-selector');
    const flashcardContainer = document.getElementById('flashcard-container');
    const sectionGrid = document.getElementById('section-grid');
    const sectionTitle = document.getElementById('section-title');
    const deck = document.getElementById('deck');
    const learnModeBtn = document.getElementById('learn-mode-btn');
    const testModeBtn = document.getElementById('test-mode-btn');
    const testModeControls = document.getElementById('test-mode-controls');
    const revealBtn = document.getElementById('reveal-btn');
    const backToSectionsBtn = document.getElementById('back-to-sections');

    // --- FUNCTIONS ---

    /**
     * Creates the HTML for a single flashcard.
     */
    function createCardElement(cardData, index) {
        const card = document.createElement('div');
        card.className = 'card shadow-lg';
        card.style.zIndex = currentDeck.length - index;

        const cardInner = document.createElement('div');
        cardInner.className = 'card-inner bg-white';
        
        const bgColor = colorPalette[index % colorPalette.length];
        
        let topHalfHTML;
        let bottomHalfHTML;

        if (isLearnMode) {
            cardInner.classList.add('learn-mode-card');
            topHalfHTML = `
                <div class="top-half w-full h-1/2 flex justify-center items-center ${bgColor}">
                    <h3 class="text-5xl font-bold text-gray-800/80 pointer-events-none">${cardData.english}</h3>
                </div>
            `;
            bottomHalfHTML = `
                <div class="bottom-half w-full h-1/2 flex flex-col justify-center items-center p-6 pointer-events-none">
                     <h4 class="text-3xl font-semibold text-blue-600">${cardData.thai}</h4>
                     <p class="text-xl text-gray-500 mt-2">[${cardData.phonetic}]</p>
                     <span class="mt-4 text-3xl">üîä</span>
                </div>
            `;
        } else { // Test Mode
            topHalfHTML = `
                <div class="top-half w-full h-1/2 flex justify-center items-center ${bgColor} hidden">
                    <h3 class="text-5xl font-bold text-gray-800/80 pointer-events-none">${cardData.english}</h3>
                </div>
            `;
            bottomHalfHTML = `
                 <div class="bottom-half w-full h-full flex flex-col justify-center items-center p-6">
                    <p class="text-5xl text-blue-600 font-bold">${cardData.thai}</p>
                    <div class="reveal-content mt-4 opacity-0 transition-opacity duration-300">
                        <p class="text-2xl text-gray-500 mt-2">[${cardData.phonetic}]</p>
                    </div>
                </div>
            `;
        }

        cardInner.innerHTML = topHalfHTML + bottomHalfHTML;
        card.appendChild(cardInner);
        
        addUnifiedInputListeners(card, cardData);

        return card;
    }

    /**
     * Renders the current deck of cards to the screen.
     */
    function renderDeck() {
        deck.innerHTML = '';
        currentDeck.slice(cardIndex).forEach((cardData, index) => {
            const cardEl = createCardElement(cardData, cardIndex + index);
            deck.appendChild(cardEl);
        });
        if (cardIndex >= currentDeck.length) {
            deck.innerHTML = `
                <div class="w-full h-full flex flex-col items-center justify-center bg-white rounded-3xl shadow-lg p-4">
                    <h3 class="text-2xl font-bold text-gray-700 mb-2">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</h3>
                    <p class="text-gray-600 mb-4">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡πÉ‡∏ô‡∏ö‡∏ó‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß</p>
                    <button id="restart-section" class="px-6 py-2 bg-blue-500 text-white font-semibold rounded-full">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                </div>
            `;
            document.getElementById('restart-section').addEventListener('click', () => {
                startSection(currentSection);
            });
        }
    }

    /**
     * Adds unified event listeners to a card to handle both tap and swipe.
     */
    function addUnifiedInputListeners(card, cardData) {
        let startX = 0;
        let isDragging = false;
        let startTime = 0;

        function onPointerDown(e) {
            isDragging = true;
            startX = e.clientX || e.touches[0].clientX;
            startTime = new Date().getTime();
            card.classList.add('dragging');
        }

        function onPointerMove(e) {
            if (!isDragging) return;
            const currentX = e.clientX || e.touches[0].clientX;
            const diffX = currentX - startX;
            card.style.transform = `translateX(${diffX}px) rotate(${diffX / 20}deg)`;
        }

        function onPointerUp(e) {
            if (!isDragging) return;
            isDragging = false;
            card.classList.remove('dragging');

            const finalX = e.clientX || e.changedTouches[0].clientX;
            const diffX = finalX - startX;
            const timeElapsed = new Date().getTime() - startTime;

            if (isLearnMode && Math.abs(diffX) < 10 && timeElapsed < 200) {
                speak(cardData.english);
                card.style.transform = 'translateX(0) rotate(0)';
                return;
            }

            if (Math.abs(diffX) > 100) {
                card.style.transform = `translateX(${diffX > 0 ? 500 : -500}px) rotate(${diffX > 0 ? 30 : -30}deg)`;
                card.style.opacity = '0';
                setTimeout(() => {
                    cardIndex++;
                    renderDeck();
                }, 300);
            } else { 
                card.style.transform = 'translateX(0) rotate(0)';
            }
        }
        
        card.addEventListener('mousedown', onPointerDown);
        card.addEventListener('mousemove', onPointerMove);
        card.addEventListener('mouseup', onPointerUp);
        card.addEventListener('mouseleave', onPointerUp);
        
        card.addEventListener('touchstart', onPointerDown, { passive: true });
        card.addEventListener('touchmove', onPointerMove, { passive: true });
        card.addEventListener('touchend', onPointerUp);
    }

    /**
     * Switches the app mode between Learn and Test.
     */
    function switchMode(toLearnMode) {
        isLearnMode = toLearnMode;
        if (isLearnMode) {
            learnModeBtn.classList.replace('bg-gray-200', 'bg-blue-500');
            learnModeBtn.classList.replace('text-gray-700', 'text-white');
            testModeBtn.classList.replace('bg-blue-500', 'bg-gray-200');
            testModeBtn.classList.replace('text-white', 'text-gray-700');
            testModeControls.classList.add('hidden');
        } else {
            testModeBtn.classList.replace('bg-gray-200', 'bg-blue-500');
            testModeBtn.classList.replace('text-gray-700', 'text-white');
            learnModeBtn.classList.replace('bg-blue-500', 'bg-gray-200');
            learnModeBtn.classList.replace('text-white', 'text-gray-700');
            testModeControls.classList.remove('hidden');
        }
        startSection(currentSection);
    }

    /**
     * Uses the Web Speech API to say a word.
     */
    function speak(text) {
        if (synth.speaking) {
            synth.cancel();
        }
        const utterThis = new SpeechSynthesisUtterance(text);
        utterThis.lang = 'en-US';
        utterThis.pitch = 1;
        utterThis.rate = 0.9;
        synth.speak(utterThis);
    }
    
    /**
     * Starts a flashcard section.
     */
    function startSection(sectionName) {
        currentSection = sectionName;
        
        if (sectionName.includes("Review")) {
            currentDeck = generateReviewDeck(sectionName);
        } else {
            currentDeck = sections[sectionName];
        }

        cardIndex = 0;
        
        sectionTitle.textContent = sectionName;
        sectionSelector.classList.add('hidden');
        flashcardContainer.classList.remove('hidden');
        
        renderDeck();
    }

    /**
     * Generates a shuffled deck for review tests.
     */
    function generateReviewDeck(reviewName) {
        let combinedDeck = [];
        if (reviewName === "Business Review (1-5)") {
            const reviewSections = ["Business 1: The Office", "Business 2: Money & Finance", "Business 3: Marketing & Sales", "Business 4: Jobs & Roles", "Business 5: Company & Growth"];
            reviewSections.forEach(name => {
                combinedDeck = combinedDeck.concat(sections[name]);
            });
        }
        // Add logic for other review decks here...

        // Fisher-Yates shuffle algorithm
        for (let i = combinedDeck.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [combinedDeck[i], combinedDeck[j]] = [combinedDeck[j], combinedDeck[i]];
        }

        return combinedDeck.slice(0, 20); // Return 20 random cards
    }

    /**
     * Initializes the section selection screen.
     */
    function initSectionSelector() {
        sectionGrid.innerHTML = '';
        const sectionNames = Object.keys(sections);

        // Regular sections
        sectionNames.forEach(sectionName => {
            const button = document.createElement('button');
            button.className = "p-4 bg-white border-2 border-gray-200 rounded-xl text-center shadow-sm hover:shadow-md hover:border-blue-400 transition-all duration-200";
            button.innerHTML = `
                <div class="text-3xl mb-2">üìö</div>
                <div class="font-semibold text-gray-700">${sectionName}</div>
                <div class="text-sm text-gray-500">${sections[sectionName].length} words</div>
            `;
            button.addEventListener('click', () => startSection(sectionName));
            sectionGrid.appendChild(button);
        });

        // Add Review Test section
        const reviewButton = document.createElement('button');
        reviewButton.className = "p-4 bg-yellow-100 border-2 border-yellow-300 rounded-xl text-center shadow-sm hover:shadow-md hover:border-yellow-500 transition-all duration-200";
        reviewButton.innerHTML = `
            <div class="text-3xl mb-2">‚≠ê</div>
            <div class="font-semibold text-gray-700">Business Review (1-5)</div>
            <div class="text-sm text-gray-500">Test - 20 words</div>
        `;
        reviewButton.addEventListener('click', () => startSection("Business Review (1-5)"));
        sectionGrid.appendChild(reviewButton);
        
        sectionSelector.classList.remove('hidden');
        flashcardContainer.classList.add('hidden');
    }

    // --- EVENT LISTENERS ---
    learnModeBtn.addEventListener('click', () => switchMode(true));
    testModeBtn.addEventListener('click', () => switchMode(false));
    backToSectionsBtn.addEventListener('click', initSectionSelector);

    revealBtn.addEventListener('click', () => {
        if (cardIndex >= currentDeck.length) return;
        
        const topCard = deck.querySelector('.card');
        const revealContent = topCard.querySelector('.reveal-content');
        const topHalf = topCard.querySelector('.top-half');
        const bottomHalf = topCard.querySelector('.bottom-half');
        
        if (revealContent.style.opacity === '1') {
            speak(currentDeck[cardIndex].english);
        } else {
            topHalf.classList.remove('hidden');
            bottomHalf.classList.replace('h-full', 'h-1/2');
            revealContent.style.opacity = '1';
            speak(currentDeck[cardIndex].english);
        }
    });

    // --- INITIALIZATION ---
    initSectionSelector();

</script>

</body>
</html>
